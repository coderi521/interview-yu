给定一个 _n_ × _n_ 的二维矩阵 `matrix` 表示一个图像。请你将图像顺时针旋转 90 度。

你必须在 **[原地](https://baike.baidu.com/item/%E5%8E%9F%E5%9C%B0%E7%AE%97%E6%B3%95)** 旋转图像，这意味着你需要直接修改输入的二维矩阵。**请不要** 使用另一个矩阵来旋转图像。

![[Pasted image 20260219230834.png]]

```js
/**

* @param {number[][]} matrix

* @return {void} Do not return anything, modify matrix in-place instead.

*/

var rotate = function (matrix) {
  const n = matrix[0].length

  for (let i = 0; i < n; i++) {
    // 对角线元素互换

    for (let j = i + 1; j < n; j++) {
      const temp = matrix[i][j]

      matrix[i][j] = matrix[j][i]

      matrix[j][i] = temp
    }
  }

  // 将每一行的元素反转

  for (let i = 0; i < n; i++) {
    let left = 0

    let right = n - 1

    while (left < right) {
      const temp = matrix[i][left]

      matrix[i][left] = matrix[i][right]

      matrix[i][right] = temp

      left++

      right--
    }
  }

  return matrix
}

```

给一个 `n × n` 的二维矩阵 `matrix`，将它**顺时针旋转 90°**，并且**原地修改**（不新建第二个矩阵）。

一个非常经典、也是面试中最推荐的解法是：

> **顺时针旋转 90° = 矩阵转置（transpose） + 每一行水平翻转**

拆成两步做，是因为：

- 「转置」和「水平翻转」这两个操作都只涉及**两个元素交换**，可以原地完成；
- 而如果你直接按照「原坐标 → 新坐标」去搬运，很容易需要额外数组做中转，违反题目要求。

### 1.1 转置（transpose）是什么？

转置矩阵：把所有元素关于主对角线（左上到右下）对称交换：

- 原来在 `(i, j)` 的元素
- 变到 `(j, i)`
### 1.2 水平翻转每一行

对转置后的矩阵，每一行做「左右调换」：

### 1.3 为什么这两步等价于顺时针旋转 90°？

从坐标推一下：

- 原矩阵元素在 `(i, j)`
- 先转置：→ `(j, i)`
- 再水平翻转：行号不变，列号变成 `n - 1 - i`  
    所以最终坐标是：`(j, n - 1 - i)`

而顺时针转 90° 的映射，正好是：

> 原 `(i, j)` → 新 `(j, n - 1 - i)`

说明「转置 + 水平翻转」正好完成了顺时针 90° 旋转。